/**
 * Copyright (c) 2016 soonyh
 * https://github.com/soonyh/ajaxCache.js
 */
!(function(a,c,b){var d=typeof define==="function",e=typeof module!=="undefined"&&module.exports;if(d){define(b)}else{if(e){module.exports=b()}else{a[c]=b()}}})(window,"AjaxCache",function(){function f(l,k,m,i,j){if(l.indexOf("?")>-1){l=l+"&rnd="+Math.random()}else{l=l+"?rnd="+Math.random()}l+="&_ajax=1";return $.ajax({url:l,dataType:j,async:i,type:k,data:m})}var e={},c=[{name:"load",method:"get",async:true,dataType:"html"},{name:"get",method:"get",async:true,dataType:"json"},{name:"post",method:"post",async:true,dataType:"json"},{name:"syncGet",method:"get",async:false,dataType:"json"},{name:"syncPost",method:"post",async:false,dataType:"json"}];for(var d=0,a=c.length;d<a;d++){e[c[d].name]=(function(j){return function(){var k=arguments[0],l=arguments[1],i=arguments[2]||c[j].dataType;return f(k,c[j].method,l,c[j].async,i)}})(d)}var b={};var h=[];function g(i,j){return i+$.param(j)}return function(m){m=m||{};var l=m.cacheInterval||(1000*60*60);var k={};for(var j in e){if(Object.prototype.hasOwnProperty.call(e,j)){k[j]=(function(n){return function(){var p=arguments[0],q=arguments[1]||{},t=g(p,q),i=b[t],r=false;if(i){var s=+new Date();if(s-i.cacheStartTime<=l){r=true}else{delete b[t]}}if(r){return i.jqXHR}var o=e[n].apply(e,arguments);h.push(o);return o.done(function(u){b[t]={res:u,cacheStartTime:+new Date(),jqXHR:o}})}})(j);k["cache"]=b;k["abort"]=function(){$.each(h,function(i,n){n.abort();console.log("abort")})};k["clear"]=function(){k["cache"]=b={};console.log("clear")}}}return k}});